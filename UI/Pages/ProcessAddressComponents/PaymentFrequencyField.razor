@using DataLibrary.Models
@namespace UI.Pages.ProcessAddressComponents

<div class="col gy-3">
	<MudText>Payment Frequency</MudText>
	@if (AddressToBeInputModel is not null)
	{
		<MudSelect Adornment="Adornment.Start" AdornmentIcon="@Icons.Filled.MonitorHeart" Variant="Variant.Outlined" ValueChanged="OnPaymentFrequencyChanged"
			   Style="max-width: fit-content;" Dense="true" Required>
			<MudSelectItem Value="@AddressModel.PaymentFrequency.Annual">Annual</MudSelectItem>
			<MudSelectItem Value="@AddressModel.PaymentFrequency.SemiAnnual">Semi-Annual</MudSelectItem>
			<MudSelectItem Value="@AddressModel.PaymentFrequency.Quarterly">Quarterly</MudSelectItem>
			<MudSelectItem Value="@AddressModel.PaymentFrequency.Other">Other</MudSelectItem>
		</MudSelect>
	}
</div>

<CascadingValue Value="AddressToBeInputModel">
	<DateFrequencyPicker />
</CascadingValue>

@code {
	[CascadingParameter]
	public AddressModel? AddressToBeInputModel { get; set; }
	[Parameter]
	public EventCallback<AddressModel.PaymentFrequency> OnPaymentFrequencyChanged { get; set; }

	protected override void OnInitialized()
	{
		if (AddressToBeInputModel is not null)
		{
			AddressToBeInputModel.GroundRentPaymentFrequency = null;
		}
		base.OnInitialized();
	}
}
